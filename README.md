# ğŸŒ Nanobanana - Gemini API ä»£ç† & å¤šæ¨¡æ€ Web UI

[English](./README.en.md)


ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åŒç”¨é€”æœåŠ¡ï¼šæ—¢æ˜¯ä¸€ä¸ª**å…¼å®¹ Google Gemini API çš„ OpenRouter ä»£ç†æœåŠ¡å™¨**ï¼Œåˆæä¾›äº†ä¸€ä¸ªç›´è§‚çš„ **Web ç”¨æˆ·ç•Œé¢**ï¼Œè®©æ‚¨å¯ä»¥è½»æ¾åœ°ä¸å¤šæ¨¡æ€æ¨¡å‹è¿›è¡Œäº¤äº’ï¼Œå®ç°æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿæ–‡ç­‰åŠŸèƒ½ã€‚

---

### ğŸ¥ å¿«é€Ÿæ¼”ç¤º

[![æŠ–éŸ³ä»‹ç»è§†é¢‘](https://img.shields.io/badge/è§‚çœ‹æŠ–éŸ³è§†é¢‘-ç‚¹å‡»è·³è½¬-161823?style=for-the-badge&logo=douyin)](https://www.douyin.com/video/7545761080266460456)

ç‚¹å‡»ä¸Šæ–¹å¾½ç« ï¼Œè§‚çœ‹é¡¹ç›®åŠŸèƒ½çš„å®é™…æ“ä½œæ¼”ç¤ºã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸš€ API ä»£ç† (ä¸ºå¼€å‘è€…)

*   **Gemini API å…¼å®¹**: æä¾›ä¸ Google AI JS SDK (`@google/generative-ai`) å®Œå…¨å…¼å®¹çš„ API ç«¯ç‚¹ã€‚æ‚¨å¯ä»¥å°†ç°æœ‰çš„ Gemini å®¢æˆ·ç«¯ä»£ç æ— ç¼å¯¹æ¥åˆ°æœ¬æœåŠ¡ï¼Œé€šè¿‡ OpenRouter ä½¿ç”¨è¯¥æ¨¡å‹ã€‚
*   **æµå¼ä¸éæµå¼**: å®Œæ•´å®ç°äº† `:streamGenerateContent` (æµå¼) å’Œ `:generateContent` (éæµå¼) ä¸¤ä¸ªæ ¸å¿ƒç«¯ç‚¹ã€‚
*   **æ™ºèƒ½ä¸Šä¸‹æ–‡æå–**: è‡ªåŠ¨ä» Gemini çš„å®Œæ•´å¯¹è¯å†å² (`contents`) ä¸­æå–æœ€è¿‘çš„ã€ç›¸å…³çš„ä¸Šä¸‹æ–‡å‘é€ç»™æ¨¡å‹ï¼Œä¼˜åŒ–è¯·æ±‚æ•ˆç‡ã€‚
*   **ç»Ÿä¸€è®¤è¯**: æ”¯æŒé€šè¿‡ `Authorization: Bearer <API_KEY>` æˆ– `x-goog-api-key` header ä¼ é€’ OpenRouter API Keyã€‚

### ğŸ¨ Web UI (ä¸ºç”¨æˆ·)

*   **å¤šå›¾ä¸Šä¼ **: æ”¯æŒæ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ ä¸€å¼ æˆ–å¤šå¼ å›¾ç‰‡ï¼Œå¹¶å®æ—¶æ˜¾ç¤ºç¼©ç•¥å›¾ã€‚
*   **ç›´è§‚äº¤äº’**: ç»“åˆä¸Šä¼ çš„å›¾ç‰‡å’Œæ–‡æœ¬æç¤ºè¯ï¼Œä¸ AI è¿›è¡Œå¯¹è¯æˆ–åˆ›ä½œã€‚
*   **æ™ºèƒ½ API Key å¤„ç†**:
    *   å¦‚æœåœ¨éƒ¨ç½²æ—¶è®¾ç½®äº†ç¯å¢ƒå˜é‡ `OPENROUTER_API_KEY`ï¼Œå‰ç«¯å°†è‡ªåŠ¨éšè—è¾“å…¥æ¡†ï¼Œæä¾›æ¸…çˆ½çš„ç”¨æˆ·ä½“éªŒã€‚
    *   å¦‚æœæœªè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåˆ™ä¼šæ˜¾ç¤ºè¾“å…¥æ¡†ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¸´æ—¶è¾“å…¥ã€‚
*   **å³æ—¶ç»“æœå±•ç¤º**: åœ¨ç•Œé¢å³ä¾§ç›´æ¥æ˜¾ç¤ºæ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬æˆ–å›¾ç‰‡ç»“æœã€‚

---

## ğŸš€ éƒ¨ç½²åˆ° Deno Deploy

**æ‰‹åŠ¨æ­¥éª¤:**

1.  **Fork æœ¬é¡¹ç›®**: å°†æ­¤é¡¹ç›® Fork åˆ°æ‚¨è‡ªå·±çš„ GitHub ä»“åº“ã€‚
2.  **ç™»å½• Deno Deploy**: ä½¿ç”¨æ‚¨çš„ GitHub è´¦å·ç™»å½• [Deno Deploy](https://dash.deno.com/projects)ã€‚
3.  **åˆ›å»ºæ–°é¡¹ç›®**:
    *   ç‚¹å‡» "New Project"ã€‚
    *   é€‰æ‹©æ‚¨åˆšåˆš Fork çš„ GitHub ä»“åº“ã€‚
    *   é€‰æ‹© `main` åˆ†æ”¯å’Œ `main.ts` ä½œä¸ºå…¥å£æ–‡ä»¶ã€‚
4.  **(å¯é€‰ï¼Œä½†æ¨è) æ·»åŠ ç¯å¢ƒå˜é‡**:
    *   åœ¨é¡¹ç›®çš„ "Settings" -> "Environment Variables" ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªåä¸º `OPENROUTER_API_KEY` çš„å˜é‡ã€‚
    *   å€¼ä¸ºæ‚¨è‡ªå·±çš„ OpenRouter API å¯†é’¥ã€‚è¿™æ ·åšå¯ä»¥å…å»åœ¨å‰ç«¯é‡å¤è¾“å…¥å¯†é’¥çš„éº»çƒ¦ã€‚
5.  **éƒ¨ç½²**: ç‚¹å‡» "Link" æˆ– "Deploy" æŒ‰é’®ï¼ŒDeno Deploy å°†ä¼šè‡ªåŠ¨éƒ¨ç½²æ‚¨çš„åº”ç”¨ã€‚

---

## ğŸ› ï¸ å¦‚ä½•ä½¿ç”¨

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Web ç•Œé¢

1.  æ‰“å¼€æ‚¨éƒ¨ç½²åçš„ `*.deno.dev` URLã€‚
2.  å¦‚æœéƒ¨ç½²æ—¶**æ²¡æœ‰**è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¯·åœ¨ "è®¾ç½®" åŒºåŸŸçš„è¾“å…¥æ¡†ä¸­å¡«å…¥æ‚¨çš„ OpenRouter API Keyã€‚
3.  ä¸Šä¼ ä¸€å¼ æˆ–å¤šå¼ å›¾ç‰‡ã€‚
4.  åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥æ‚¨çš„æç¤ºè¯ï¼ˆä¾‹å¦‚ï¼šâ€œè®©è¿™åªçŒ«çœ‹èµ·æ¥åƒä¸ªå®‡èˆªå‘˜â€ï¼‰ã€‚
5.  ç‚¹å‡» "ç”Ÿæˆ" æŒ‰é’®ï¼Œåœ¨å³ä¾§æŸ¥çœ‹ç»“æœã€‚

### æ–¹å¼äºŒï¼šä½œä¸º API ä»£ç† (å¼€å‘è€…)

å°†æ‚¨ç°æœ‰çš„ Gemini å®¢æˆ·ç«¯ä»£ç ä¸­çš„ API åŸºåœ°å€æŒ‡å‘æ‚¨éƒ¨ç½²çš„ Deno Deploy URL å³å¯ã€‚

**cURL ç¤ºä¾‹**:
å‡è®¾æ‚¨çš„éƒ¨ç½² URL æ˜¯ `https://nanobanana.deno.dev`ã€‚

```bash
curl -X POST https://nanobanana.deno.dev/v1beta/models/gemini-pro:generateContent \
-H "Content-Type: application/json" \
-H "Authorization: Bearer YOUR_OPENROUTER_API_KEY" \
-d '{
  "contents": [
    {
      "role": "user",
      "parts": [
        { "text": "è¿™å¼ å›¾é‡Œæœ‰ä»€ä¹ˆï¼Ÿ" },
        {
          "inlineData": {
            "mimeType": "image/jpeg",
            "data": "YOUR_BASE64_ENCODED_IMAGE"
          }
        }
      ]
    }
  ]
}'
```

---

## ğŸ“¡ API ç«¯ç‚¹

| ç«¯ç‚¹                                               | æ–¹æ³•   | ç”¨é€”                               | å¤‡æ³¨                                         |
| -------------------------------------------------- | ------ | ---------------------------------- | -------------------------------------------- |
| `/v1beta/models/gemini-pro:streamGenerateContent`  | `POST` | æµå¼ç”Ÿæˆå†…å®¹ (å…¼å®¹ Gemini SDK)     | å“åº”ä¸º Server-Sent Events (SSE) æ•°æ®æµã€‚     |
| `/v1beta/models/gemini-pro:generateContent`        | `POST` | éæµå¼ç”Ÿæˆå†…å®¹ (å…¼å®¹ Gemini SDK)   | å“åº”ä¸ºæ ‡å‡† JSON å¯¹è±¡ã€‚                       |
| `/generate`                                        | `POST` | ä¸º Nanobanana Web UI æä¾›åç«¯æœåŠ¡ã€‚ | å†…éƒ¨ä½¿ç”¨ã€‚                                   |
| `/api/key-status`                                  | `GET`  | æ£€æŸ¥ç¯å¢ƒå˜é‡ä¸­æ˜¯å¦è®¾ç½®äº† API Keyã€‚ | ä¾› Web UI åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºè¾“å…¥æ¡†ã€‚               |

---

## ğŸ’» æŠ€æœ¯æ ˆ

-   **å‰ç«¯**: HTML, CSS, JavaScript (åŸç”Ÿï¼Œæ— æ¡†æ¶)
-   **åç«¯**: Deno, Deno Standard Library
-   **AI æ¨¡å‹**: é€šè¿‡ [OpenRouter](https://openrouter.ai/) ä»£ç†, é»˜è®¤ä¸º `google/gemini-2.5-flash-image-preview:free`

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºã€‚
